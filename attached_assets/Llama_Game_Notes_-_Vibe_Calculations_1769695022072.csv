Spec area,Requirements
Purpose,"Provide a single, legible headline summarising house health and balance; provide an “identity” label signalling which health metric dominates or lags (Party Mansion, Sweat Shop, Shanty Town, etc); preserve scale logic where larger communes can reach more extreme positive and negative tiers; no mechanical impact, Vibes does not modify churn, recruitment, rent, disaster risk, or any other outcome."
Inputs,"Living Standards (LS) float 0–1; Productivity (PR) float 0–1; Partytime (PT) float 0–1; Commune scale, default derived from resident count."
Constraints,"Use the same smoothing regime as health metrics; clamp inputs to 0–1; Vibes reads health metrics only, not primitives; Noise does not enter directly, it only affects Vibes via PR and PT; Noise does not affect LS."
Derived; OverallLevel,"OverallLevel = (LS × PR × PT)^(1/3). Purpose; balance-sensitive headline, one weak metric drags the level down."
Derived; Spread,"Spread = max(LS, PR, PT) − min(LS, PR, PT). Used to classify balanced vs unbalanced, and mild vs strong imbalance."
Derived; Median,"Median = middle value of {LS, PR, PT}. Used to compute dominance deltas."
Derived; Dominance deltas,"HighDelta = max − Median; LowDelta = Median − min; BranchDriver = “high” if HighDelta ≥ LowDelta else “low”; DriverMetric = metric corresponding to max if BranchDriver “high”, else metric corresponding to min."
Balanced vs unbalanced,"Balanced if Spread ≤ BALANCED_SPREAD_THRESHOLD; Unbalanced otherwise. Defaults; BALANCED_SPREAD_THRESHOLD 0.18; STRONG_IMBALANCE_THRESHOLD 0.30; Severity; Mild if 0.18 < Spread ≤ 0.30, Strong if Spread > 0.30."
Tier ladder; thresholds,Map OverallLevel to a base tier index using thresholds. Defaults; Tier 0 Iffy <0.40; Tier 1 Decent 0.40–0.55; Tier 2 Good 0.55–0.68; Tier 3 Great 0.68–0.78; Tier 4 Superb 0.78–0.87; Tier 5 Worldclass ≥0.87. Note; Decent is intended default band.
Commune scale tiers,Default by resident count; Scale 1 1–5; Scale 2 6–10; Scale 3 11–20; Scale 4 21–35; Scale 5 36+.
Scale gating; tier caps,"Clamp base tier index to allowed [minTierIndexForScale, maxTierIndexForScale]. Defaults; Scale 1 min 0 max 2; Scale 2 min 0 max 3; Scale 3 min 0 max 4; Scale 4 min 0 max 5; Scale 5 min 0 max 5. Optional extension later; add explicit crisis tiers below Iffy and gate min tier by scale too."
Identity branch label,"Balanced; BranchLabel null, optional “Balanced” suffix. Unbalanced; choose label by DriverMetric, BranchDriver, and Severity."
Branch labels; high driver,"Partytime high; Mild Party House, Strong Party Mansion. Productivity high; Mild Grind House, Strong Sweat Shop. Living Standards high; Mild Showhome, Strong Luxury Bubble."
Branch labels; low driver,"Living Standards low; Mild Shanty Town, Strong Slum Spiral. Productivity low; Mild Chaos House, Strong Dysfunctional Commune. Partytime low; Mild Dead Vibes, Strong Funeral Parlour."
Output format,"Balanced; TierName, optionally “; Balanced”. Unbalanced; “TierName; BranchLabel”. Examples; “Good; Party Mansion”, “Decent; Sweat Shop”, “Iffy; Shanty Town”."
UI requirements,"Show TierName and BranchLabel as the headline on the dashboard; show a triangle or three-axis balance glyph driven by LS, PR, PT; if tier is capped by scale (player would be higher without cap), show a subtle cap hint such as “Next tier unlocks at 11 residents”; tooltip explains Vibes is derived from LS, PR, PT; balanced houses climb ladder; imbalances create identities; larger communes unlock extremes."
Dev tools; config knobs,"BALANCED_SPREAD_THRESHOLD; STRONG_IMBALANCE_THRESHOLD; OverallLevel tier thresholds array; scale tier breakpoints array; tier caps per scale; branch label dictionary strings per metric, per high/low, per mild/strong."
Test cases; sanity,LS 0.55 PR 0.55 PT 0.55; Spread 0; Balanced; Tier Good; output “Good”. LS 0.80 PR 0.35 PT 0.75; Spread 0.45; Unbalanced Strong; DriverMetric PR low; OverallLevel ≈0.60; Tier Good; output “Good; Dysfunctional Commune”. LS 0.45 PR 0.45 PT 0.85; Spread 0.40; Unbalanced Strong; DriverMetric PT high; OverallLevel ≈0.56; Tier Good; output “Good; Party Mansion”. Scale 1 with OverallLevel 0.90; base Worldclass capped to max Good; output “Good” with cap hint.
Non-goals,Do not use Vibes for any mechanical effect; do not incorporate primitives directly; Vibes reads only the health metrics.